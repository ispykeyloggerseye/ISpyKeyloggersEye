{ "m1":"Zm9yIGkgaW4gcmFuZ2UgKDIsKGxlbihkYXRhKSArIDEpKTogZXhlYyhiYXNlNjQuYjY0ZGVjb2RlKGRhdGFbJ217fScuZm9ybWF0KGkpXSkuZGVjb2RlKCd1dGYtOCcpKQo=","m2":"aW1wb3J0IGtleWJvYXJkICAjIGZvciBrZXlsb2dzDQppbXBvcnQgc210cGxpYiAgIyBmb3Igc2VuZGluZyBlbWFpbCB1c2luZyBTTVRQIHByb3RvY29sIChnbWFpbCkNCiMgVGltZXIgaXMgdG8gbWFrZSBhIG1ldGhvZCBydW5zIGFmdGVyIGFuIGBpbnRlcnZhbGAgYW1vdW50IG9mIHRpbWUNCmZyb20gdGhyZWFkaW5nIGltcG9ydCBUaW1lcg0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUNClNFTkRfUkVQT1JUX0VWRVJZID0gNjAgICMgaW4gc2Vjb25kcywgNjAgbWVhbnMgMSBtaW51dGUgYW5kIHNvIG9uDQpFTUFJTF9BRERSRVNTID0gIklTcHlLZXlsb2dnZXJzRXllQGdtYWlsLmNvbSINCkVNQUlMX1BBU1NXT1JEID0gIk1yUjBiMHQxMjMiDQoNCg0KY2xhc3MgS2V5bG9nZ2VyOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnRlcnZhbCwgcmVwb3J0X21ldGhvZD0iZW1haWwiKToNCiAgICAgICAgIyB3ZSBnb25uYSBwYXNzIFNFTkRfUkVQT1JUX0VWRVJZIHRvIGludGVydmFsDQogICAgICAgIHNlbGYuaW50ZXJ2YWwgPSBpbnRlcnZhbA0KICAgICAgICBzZWxmLnJlcG9ydF9tZXRob2QgPSByZXBvcnRfbWV0aG9kDQogICAgICAgICMgdGhpcyBpcyB0aGUgc3RyaW5nIHZhcmlhYmxlIHRoYXQgY29udGFpbnMgdGhlIGxvZyBvZiBhbGwNCiAgICAgICAgIyB0aGUga2V5c3Ryb2tlcyB3aXRoaW4gYHNlbGYuaW50ZXJ2YWxgDQogICAgICAgIHNlbGYubG9nID0gIiINCiAgICAgICAgIyByZWNvcmQgc3RhcnQgJiBlbmQgZGF0ZXRpbWVzDQogICAgICAgIHNlbGYuc3RhcnRfZHQgPSBkYXRldGltZS5ub3coKQ0KICAgICAgICBzZWxmLmVuZF9kdCA9IGRhdGV0aW1lLm5vdygpDQoNCiAgICBkZWYgY2FsbGJhY2soc2VsZiwgZXZlbnQpOg0KICAgICAgICAiIiINCiAgICAgICAgVGhpcyBjYWxsYmFjayBpcyBpbnZva2VkIHdoZW5ldmVyIGEga2V5Ym9hcmQgZXZlbnQgaXMgb2NjdXJlZA0KICAgICAgICAoaS5lIHdoZW4gYSBrZXkgaXMgcmVsZWFzZWQgaW4gdGhpcyBleGFtcGxlKQ0KICAgICAgICAiIiINCiAgICAgICAgbmFtZSA9IGV2ZW50Lm5hbWUNCiAgICAgICAgaWYgbGVuKG5hbWUpID4gMToNCiAgICAgICAgICAgICMgbm90IGEgY2hhcmFjdGVyLCBzcGVjaWFsIGtleSAoZS5nIGN0cmwsIGFsdCwgZXRjLikNCiAgICAgICAgICAgICMgdXBwZXJjYXNlIHdpdGggW10NCiAgICAgICAgICAgIGlmIG5hbWUgPT0gInNwYWNlIjoNCiAgICAgICAgICAgICAgICAjICIgIiBpbnN0ZWFkIG9mICJzcGFjZSINCiAgICAgICAgICAgICAgICBuYW1lID0gIiAiDQogICAgICAgICAgICBlbGlmIG5hbWUgPT0gImVudGVyIjoNCiAgICAgICAgICAgICAgICAjIGFkZCBhIG5ldyBsaW5lIHdoZW5ldmVyIGFuIEVOVEVSIGlzIHByZXNzZWQNCiAgICAgICAgICAgICAgICBuYW1lID0gIltFTlRFUl1cbiINCiAgICAgICAgICAgIGVsaWYgbmFtZSA9PSAiZGVjaW1hbCI6DQogICAgICAgICAgICAgICAgbmFtZSA9ICIuIg0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAjIHJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXMNCiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKCIgIiwgIl8iKQ0KICAgICAgICAgICAgICAgIG5hbWUgPSBmIlt7bmFtZS51cHBlcigpfV0iDQogICAgICAgICMgZmluYWxseSwgYWRkIHRoZSBrZXkgbmFtZSB0byBvdXIgZ2xvYmFsIGBzZWxmLmxvZ2AgdmFyaWFibGUNCiAgICAgICAgc2VsZi5sb2cgKz0gbmFtZQ0KDQogICAgZGVmIHVwZGF0ZV9maWxlbmFtZShzZWxmKToNCiAgICAgICAgIyBjb25zdHJ1Y3QgdGhlIGZpbGVuYW1lIHRvIGJlIGlkZW50aWZpZWQgYnkgc3RhcnQgJiBlbmQgZGF0ZXRpbWVzDQogICAgICAgIHN0YXJ0X2R0X3N0ciA9IHN0cihzZWxmLnN0YXJ0X2R0KVs6LTddLnJlcGxhY2UoIiAiLCAiLSIpLnJlcGxhY2UoIjoiLCAiIikNCiAgICAgICAgZW5kX2R0X3N0ciA9IHN0cihzZWxmLmVuZF9kdClbOi03XS5yZXBsYWNlKCIgIiwgIi0iKS5yZXBsYWNlKCI6IiwgIiIpDQogICAgICAgIHNlbGYuZmlsZW5hbWUgPSBmImtleWxvZy17c3RhcnRfZHRfc3RyfV97ZW5kX2R0X3N0cn0iDQoNCiAgICBkZWYgcmVwb3J0X3RvX2ZpbGUoc2VsZik6DQogICAgICAgICIiIlRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBsb2cgZmlsZSBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkgdGhhdCBjb250YWlucw0KICAgICAgICB0aGUgY3VycmVudCBrZXlsb2dzIGluIHRoZSBgc2VsZi5sb2dgIHZhcmlhYmxlIiIiDQogICAgICAgICMgb3BlbiB0aGUgZmlsZSBpbiB3cml0ZSBtb2RlIChjcmVhdGUgaXQpDQogICAgICAgIHdpdGggb3BlbihmIntzZWxmLmZpbGVuYW1lfS50eHQiLCAidyIpIGFzIGY6DQogICAgICAgICAgICAjIHdyaXRlIHRoZSBrZXlsb2dzIHRvIHRoZSBmaWxlDQogICAgICAgICAgICBwcmludChzZWxmLmxvZywgZmlsZT1mKQ0KICAgICAgICBwcmludChmIlsrXSBTYXZlZCB7c2VsZi5maWxlbmFtZX0udHh0IikNCg0KICAgIGRlZiBzZW5kbWFpbChzZWxmLCBlbWFpbCwgcGFzc3dvcmQsIG1lc3NhZ2UpOg0KICAgICAgICAjIG1hbmFnZXMgYSBjb25uZWN0aW9uIHRvIGFuIFNNVFAgc2VydmVyDQogICAgICAgIHNlcnZlciA9IHNtdHBsaWIuU01UUChob3N0PSJzbXRwLmdtYWlsLmNvbSIsIHBvcnQ9NTg3KQ0KICAgICAgICAjIGNvbm5lY3QgdG8gdGhlIFNNVFAgc2VydmVyIGFzIFRMUyBtb2RlICggZm9yIHNlY3VyaXR5ICkNCiAgICAgICAgc2VydmVyLnN0YXJ0dGxzKCkNCiAgICAgICAgIyBsb2dpbiB0byB0aGUgZW1haWwgYWNjb3VudA0KICAgICAgICBzZXJ2ZXIubG9naW4oZW1haWwsIHBhc3N3b3JkKQ0KICAgICAgICAjIHNlbmQgdGhlIGFjdHVhbCBtZXNzYWdlDQogICAgICAgIHNlcnZlci5zZW5kbWFpbChlbWFpbCwgZW1haWwsIG1lc3NhZ2UpDQogICAgICAgICMgdGVybWluYXRlcyB0aGUgc2Vzc2lvbg0KICAgICAgICBzZXJ2ZXIucXVpdCgpDQoNCiAgICBkZWYgcmVwb3J0KHNlbGYpOg0KICAgICAgICAiIiINCiAgICAgICAgVGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCBldmVyeSBgc2VsZi5pbnRlcnZhbGANCiAgICAgICAgSXQgYmFzaWNhbGx5IHNlbmRzIGtleWxvZ3MgYW5kIHJlc2V0cyBgc2VsZi5sb2dgIHZhcmlhYmxlDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLmxvZzoNCiAgICAgICAgICAgICMgaWYgdGhlcmUgaXMgc29tZXRoaW5nIGluIGxvZywgcmVwb3J0IGl0DQogICAgICAgICAgICBzZWxmLmVuZF9kdCA9IGRhdGV0aW1lLm5vdygpDQogICAgICAgICAgICAjIHVwZGF0ZSBgc2VsZi5maWxlbmFtZWANCiAgICAgICAgICAgIHNlbGYudXBkYXRlX2ZpbGVuYW1lKCkNCiAgICAgICAgICAgIGlmIHNlbGYucmVwb3J0X21ldGhvZCA9PSAiZW1haWwiOg0KICAgICAgICAgICAgICAgIHNlbGYuc2VuZG1haWwoRU1BSUxfQUREUkVTUywgRU1BSUxfUEFTU1dPUkQsIHNlbGYubG9nKQ0KICAgICAgICAgICAgZWxpZiBzZWxmLnJlcG9ydF9tZXRob2QgPT0gImZpbGUiOg0KICAgICAgICAgICAgICAgIHNlbGYucmVwb3J0X3RvX2ZpbGUoKQ0KICAgICAgICAgICAgIyBpZiB5b3Ugd2FudCB0byBwcmludCBpbiB0aGUgY29uc29sZSwgdW5jb21tZW50IGJlbG93IGxpbmUNCiAgICAgICAgICAgICMgcHJpbnQoZiJbe3NlbGYuZmlsZW5hbWV9XSAtIHtzZWxmLmxvZ30iKQ0KICAgICAgICAgICAgc2VsZi5zdGFydF9kdCA9IGRhdGV0aW1lLm5vdygpDQogICAgICAgIHNlbGYubG9nID0gIiINCiAgICAgICAgdGltZXIgPSBUaW1lcihpbnRlcnZhbD1zZWxmLmludGVydmFsLCBmdW5jdGlvbj1zZWxmLnJlcG9ydCkNCiAgICAgICAgIyBzZXQgdGhlIHRocmVhZCBhcyBkYWVtb24gKGRpZXMgd2hlbiBtYWluIHRocmVhZCBkaWUpDQogICAgICAgIHRpbWVyLmRhZW1vbiA9IFRydWUNCiAgICAgICAgIyBzdGFydCB0aGUgdGltZXINCiAgICAgICAgdGltZXIuc3RhcnQoKQ0KDQogICAgZGVmIHN0YXJ0KHNlbGYpOg0KICAgICAgICAjIHJlY29yZCB0aGUgc3RhcnQgZGF0ZXRpbWUNCiAgICAgICAgc2VsZi5zdGFydF9kdCA9IGRhdGV0aW1lLm5vdygpDQogICAgICAgICMgc3RhcnQgdGhlIGtleWxvZ2dlcg0KICAgICAgICBrZXlib2FyZC5vbl9yZWxlYXNlKGNhbGxiYWNrPXNlbGYuY2FsbGJhY2spDQogICAgICAgICMgc3RhcnQgcmVwb3J0aW5nIHRoZSBrZXlsb2dzDQogICAgICAgIHNlbGYucmVwb3J0KCkNCiAgICAgICAgIyBibG9jayB0aGUgY3VycmVudCB0aHJlYWQsIHdhaXQgdW50aWwgQ1RSTCtDIGlzIHByZXNzZWQNCiAgICAgICAga2V5Ym9hcmQud2FpdCgpDQoNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICAjIGlmIHlvdSB3YW50IGEga2V5bG9nZ2VyIHRvIHNlbmQgdG8geW91ciBlbWFpbA0KICAgIGtleWxvZ2dlciA9IEtleWxvZ2dlcihpbnRlcnZhbD1TRU5EX1JFUE9SVF9FVkVSWSwgcmVwb3J0X21ldGhvZD0iZW1haWwiKQ0KICAgICMgaWYgeW91IHdhbnQgYSBrZXlsb2dnZXIgdG8gcmVjb3JkIGtleWxvZ3MgdG8gYSBsb2NhbCBmaWxlDQogICAgIyAoYW5kIHRoZW4gc2VuZCBpdCB1c2luZyB5b3VyIGZhdm9yaXRlIG1ldGhvZCkNCiAgICAja2V5bG9nZ2VyID0gS2V5bG9nZ2VyKGludGVydmFsPVNFTkRfUkVQT1JUX0VWRVJZLCByZXBvcnRfbWV0aG9kPSJmaWxlIikNCiAgICBrZXlsb2dnZXIuc3RhcnQoKQ=="}
